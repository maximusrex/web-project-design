<!DOCTYPE html>
<html lang="en">
	<head>
		<title>Getting Started with ml5.js</title>
		<!-- p5 -->
		<script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.2.0/p5.min.js"></script>
		<!-- ml5 -->
		<script src="https://unpkg.com/ml5@latest/dist/ml5.min.js"></script>
	</head>
	<div id="canvas"></div>
	<div id="results"></div>
	<body>
		<script>
			let mobileNet, canvas;
			function setup() {
				canvas = createCanvas(640, 480);
				background(240);
				canvas.parent("canvas");
				fill(0);
				let btn = createButton("submit drawing");
				btn.mousePressed(classfiyCanvas);
			}
			function mouseDragged() {
				strokeWeight(3);
				line(mouseX, mouseY, pmouseX, pmouseY);
			}

			function classfiyCanvas() {
				mobileNet = ml5.imageClassifier("MobileNet", () => {
					mobileNet.predict(canvas, (error, result) => {
						if (error) {
							console.error(error);
						} else {
							console.log(result);
							//render results in a dom element
							let myList = createElement("ul");
							let msgP = createP("this is a...");
							msgP.parent("results");
							result.forEach((res) => {
								let li = createElement("li", res.label);
								li.parent(myList);
							});
							myList.parent("results");
						}
					});
				});
			}
		</script>
	</body>
</html>
