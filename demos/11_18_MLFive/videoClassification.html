<!DOCTYPE html>
<html lang="en">
	<head>
		<title>Getting Started with ml5.js</title>
		<!-- p5 -->
		<script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.2.0/p5.min.js"></script>
		<!-- ml5 -->
		<script src="https://unpkg.com/ml5@latest/dist/ml5.min.js"></script>
	</head>
	<div id="canvas"></div>

	<body>
		<script>
			let mobileNet, capture;
			let label = "";

			function setup() {
				let canvas = createCanvas(640, 360);
				background(240);
				canvas.parent("canvas");
				capture = createCapture(VIDEO);
				capture.hide();
				videoClassify();
			}

			function draw() {
				image(capture, 0, 0, width, height);
				fill(200, 50, 180);
				stroke(255);
				textSize(28);
				text(label, 20, 340);
			}

			function videoClassify() {
				mobileNet = ml5.imageClassifier("MobileNet", capture, () => {
					console.log("model is ready");
					mobileNet.predict((err, results) => {
						if (err) {
							console.error(err);
						} else {
							label = results[0].label;
							//run the function again to keep classifying
							videoClassify();
						}
					});
				});
			}
		</script>
	</body>
</html>
